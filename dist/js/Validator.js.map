{"version":3,"sources":["Validator.js"],"names":["Validator","selector","console","log","$field","document","querySelector","warn","$errorContainer","createElement","classList","add","parentElement","appendChild","errors","addEventListener","validate","bind","value","length","push","setTimeout","showErrors","innerHTML","style","borderColor","forEach","error"],"mappings":";;;;;;IAAMA,S;AACL,oBAAYC,QAAZ,EAAsB;AAAA;;AACrBC,UAAQC,GAAR,CAAY,4BAAZ;;AAGA;AACA,OAAKC,MAAL,GAAcC,SAASC,aAAT,CAAuBL,QAAvB,CAAd;AACA,MAAI,CAAC,KAAKG,MAAV,EAAkB;AACjBF,WAAQK,IAAR,4CAAuDN,QAAvD;AACA,UAAO,KAAP;AACA;;AAED,MAAIO,wBAAJ;;AAEA,MAAI,KAAKA,eAAL,KAAyB,IAA7B,EAAmC;AAClC;AACA,QAAKA,eAAL,GAAuBH,SAASI,aAAT,CAAuB,KAAvB,CAAvB;AACA,QAAKD,eAAL,CAAqBE,SAArB,CAA+BC,GAA/B,CAAmC,eAAnC;AACA,QAAKP,MAAL,CAAYQ,aAAZ,CAA0BC,WAA1B,CAAsC,KAAKL,eAA3C;AACA;;AAID;AACA;AACA,OAAKM,MAAL,GAAc,EAAd;;AAGA;AACA;AACA;AACA,OAAKV,MAAL,CAAYW,gBAAZ,UAAsC,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAtC;AACA,OAAKb,MAAL,CAAYW,gBAAZ,SAAqC,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAArC;AACA;;;;6BAEU;AACVf,WAAQC,GAAR,iBAA4B,KAAKC,MAAL,CAAYc,KAAxC;;AAEA;AACA,QAAKJ,MAAL,GAAc,EAAd;;AAEA;AACA,OAAI,CAAC,KAAKV,MAAL,CAAYc,KAAZ,CAAkBC,MAAvB,EAA+B;AAC9B,SAAKL,MAAL,CAAYM,IAAZ,CAAiB,6BAAjB;AACA;;AAED;AACA;AACA;AACAC,cAAW,KAAKC,UAAL,CAAgBL,IAAhB,CAAqB,IAArB,CAAX,EAAuC,CAAvC;AACA;;;+BAEY;AAAA;;AACZf,WAAQC,GAAR,CAAY,cAAZ;AACA,QAAKK,eAAL,CAAqBe,SAArB,GAAiC,EAAjC;AACA,OAAI,KAAKT,MAAL,CAAYK,MAAhB,EAAwB;AACvB,SAAKf,MAAL,CAAYoB,KAAZ,CAAkBC,WAAlB;;AAEA;AACA,SAAKX,MAAL,CAAYY,OAAZ,CAAoB,UAACC,KAAD,EAAW;AAC9B,WAAKnB,eAAL,CAAqBe,SAArB,IAAkC,QAAQI,KAAR,GAAgB,MAAlD;AACA,KAFD;AAKA,IATD,MASO;AACN,SAAKvB,MAAL,CAAYoB,KAAZ,CAAkBC,WAAlB;AACA;AACD","file":"Validator.js","sourcesContent":["class Validator {\n\tconstructor(selector) {\n\t\tconsole.log('constructor from Validator')\n\n\n\t\t//find the field, show an error if its not available\n\t\tthis.$field = document.querySelector(selector);\n\t\tif (!this.$field) {\n\t\t\tconsole.warn(`Couldn't find an element with selector`, selector)\n\t\t\treturn false;\n\t\t}\n\n\t\tlet $errorContainer;\n\n\t\tif (this.$errorContainer !== true) {\n\t\t\t// make an element to show errors in\n\t\t\tthis.$errorContainer = document.createElement('div');\n\t\t\tthis.$errorContainer.classList.add('error-message');\n\t\t\tthis.$field.parentElement.appendChild(this.$errorContainer);\n\t\t}\n\t\t\n\n\n\t\t//keep track of errors. Use this instead of let so it is available to\n\t\t//the entire class, let would only make it local to the constructor\n\t\tthis.errors = [];\n\n\n\t\t//event listener will only use a special version of this so it doesn't redefine this\n\t\t//add event listener to call this.validate, but overrrule it's this logic,\n\t\t//and force its this to be the Validate class instance\n\t\tthis.$field.addEventListener(`keyup`, this.validate.bind(this))\n\t\tthis.$field.addEventListener(`blur`, this.validate.bind(this))\n\t}\n\n\tvalidate() {\n\t\tconsole.log(`validate!!!!`, this.$field.value)\n\n\t\t//empty out current errors\n\t\tthis.errors = [];\n\t\t\n\t\t//if this field is empty, give an error\n\t\tif (!this.$field.value.length) {\n\t\t\tthis.errors.push(\"You must fill out the field\");\n\t\t}\n\n\t\t//This is a hack.\n\t\t//putting it in a 0ms timeout just moves it to the end of the\n\t\t//call stack after any and all parent/child/grandchild/etc\n\t\tsetTimeout(this.showErrors.bind(this), 0)\n\t}\n\n\tshowErrors() {\n\t\tconsole.log('showErrors()')\n\t\tthis.$errorContainer.innerHTML = \"\";\n\t\tif (this.errors.length) {\n\t\t\tthis.$field.style.borderColor = `red`;\n\t\t\t\n\t\t\t//using an arrow function to keep this under the class\n\t\t\tthis.errors.forEach((error) => {\n\t\t\t\tthis.$errorContainer.innerHTML += '<p>' + error + '</p>';\n\t\t\t})\n\t\t\t\n\n\t\t} else {\n\t\t\tthis.$field.style.borderColor = `green`;\n\t\t}\n\t}\n}"]}